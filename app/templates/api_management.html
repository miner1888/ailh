{% extends "base.html" %}

{% block title %}API Key Management{% endblock %}

{% block content %}
<section id="api-management-section">
    <h2>API Key Management</h2>
    <button id="showAddApiKeyFormBtn">Add New API Key</button>

    <div id="addEditApiKeyFormContainer" style="display:none; margin-top: 20px; padding: 15px; border: 1px solid #ccc;">
        <h3 id="formTitle">Add API Key</h3>
        <form id="apiKeyForm">
            <input type="hidden" id="apiId" name="apiId">
            <div>
                <label for="alias">Alias:</label>
                <input type="text" id="alias" name="alias" required>
            </div>
            <div>
                <label for="api_key">API Key:</label>
                <input type="text" id="api_key" name="api_key" required>
            </div>
            <div>
                <label for="secret_key">Secret Key:</label>
                <input type="password" id="secret_key" name="secret_key" required>
            </div>
            <div>
                <label for="mode">Mode:</label>
                <select id="mode" name="mode">
                    <option value="paper">Paper</option>
                    <option value="live">Live</option>
                </select>
            </div>
            <button type="submit" id="submitApiKeyBtn">Save API Key</button>
            <button type="button" id="cancelApiKeyFormBtn">Cancel</button>
        </form>
    </div>

    <h3>Existing API Keys</h3>
    <table id="apiKeysTable" border="1" style="width:100%; margin-top:20px;">
        <thead>
            <tr>
                <th>Alias</th>
                <th>API Key (Partial)</th>
                <th>Mode</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <!-- Rows will be populated by JavaScript -->
        </tbody>
    </table>
</section>
{% endblock %}

{% block scripts %}
{{ super() }} {# Includes scripts from base.html if any #}
<script src="{{ url_for('static', path='/js/api_management.js') }}" defer></script>
{% endblock %}
